from os import environ

from pydantic import BaseSettings


class BaseConfig(BaseSettings):

    def __init__(self, prefix='', **kwargs):
        self.__config__.env_prefix = prefix
        super().__init__(**kwargs)

    def dict(self, prefix=''):
        return {
            key[len(prefix):]: value
            for key, value
            in self
            if key.startswith(prefix)
        }
