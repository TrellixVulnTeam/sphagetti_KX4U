from functools import partial
import re


def to_snake_case(s):
    """ Code from https://github.com/jpvanhal/inflection """
    s = re.sub(r'([A-Z]+)([A-Z][a-z])', r'\1_\2', s)
    s = re.sub(r'([a-z\d])([A-Z])', r'\1_\2', s)
    s = s.replace('-', '_')
    return s.lower()


def get(obj, path, default=None):
    if isinstance(path, str):
        path = path.split('.')
    if len(path) == 1:
        return obj.get(path[0], default)
    sub = obj.get(path[0], None)
    return get(sub, path[1:], default) if sub else default
